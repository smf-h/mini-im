# 方案包：小群群聊 + 重要消息（@我/回复我）+ 稀疏索引表

## 背景
当前项目已具备：
- 群相关表结构：`t_group`、`t_group_member`；
- 消息表：`t_message`，并已支持“成员游标”用于送达/已读（`t_group_member.last_*_msg_id`）；
- WS ACK 逻辑已能推进群成员游标（`groupMemberMapper.markDelivered/markRead`）。

但缺少一套“可扩展、可在离线/多端下可靠恢复”的群聊消息发送链路与“重要消息”能力（@我/回复我）。

## 目标
- 群聊消息：通过 WS 发送、服务端落库、在线成员实时推送、离线成员上线补发。
- 重要消息：仅对“@我/回复我”产生强提醒；`@all` 不做强提醒（仅可作为普通展示）。
- 稀疏索引表：持久化“哪些消息 @ 了我 / 回复了我”，用于离线时计算 `@未读`，避免 fanout-on-write 的写放大。
- 扩展性：后续可平滑扩展到大群（分批推送/限流/多实例投递），不推翻数据模型。

## 非目标（本期不做）
- 大群分批/限流/降级策略的完整实现（仅保留可扩展接口与结构）。
- 群管理完整能力（踢人/禁言/管理员等）。
- 富文本与完整的 @ 选择器（先用轻量规则解析 @id）。

