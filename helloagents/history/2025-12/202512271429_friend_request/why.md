# 为什么要做（Why）

## 背景

当前项目已具备：
- HTTP 鉴权（login/refresh/verify）
- WebSocket 单聊可靠性链路（SAVED/ACK_RECEIVED/离线/定时补发）
- 基础好友数据模型（`t_friend_request`/`t_friend_relation`）

但缺少“好友申请”的端到端可用能力：客户端无法发起申请、接收方无法稳定看到申请列表，也缺少前后端分离下的联调入口。

## 目标

1. 支持通过 WebSocket 发起好友申请并落库，发送方以 `ACK(SAVED)` 作为“已保存”确认。
2. 发送方未收到 `ACK(SAVED)` 时可重发，服务端需要幂等（先用缓存幂等，后续再加 DB 唯一约束）。
3. 接收方仅做一次 best-effort 推送（不要求对端 ACK，不重试）。
4. 接收方/发送方/全部（收+发）三种列表都能通过 HTTP 游标分页展示。
5. 提供一个前端联调页面（前后端分离），支持 login、WS 连接、发起好友申请、列表游标翻页。

## 非目标（本次不做）

- 好友申请的“同意/拒绝/撤销”与会话创建（后续需求）
- 幂等从缓存升级为 DB 唯一约束（后续优化）
- 接收方推送可靠投递（收不到就算）

