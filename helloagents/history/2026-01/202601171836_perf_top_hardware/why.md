# 全链路性能提升到单机顶尖水平（不改大逻辑）

## 背景

当前项目在单机环境下同时承载：
- WebSocket 长连接（单聊、群聊、ACK、呼叫信令等）
- MySQL 落库与会话/成员状态维护
- Redis（路由 SSOT、幂等、Pub/Sub、Streams 等）

你反馈对“如何制定压测口径”不确定，并希望我以专业角度把系统在**当前硬件上**优化到接近上限，同时要求：
- 大逻辑不变（不做架构性重写）
- 覆盖所有链路（单聊/群聊/ACK/跨实例/Redis 宕机等）
- 最终给出明确可复现的指标与“突破性改动→指标改善”的因果归因（消融对照，不靠猜）

## 目标（SSOT）

1) 建立可复现、可解释的压测口径（避免 “ACK 变快→负载自增→数据更差” 这类误判）
2) 在单机环境下将关键链路压到“硬件上限附近”
3) 做系统性降级/隔离验证（尤其 Redis 宕机/抖动）
4) 产出完整报告：延迟分位数、吞吐、错误率、落库保存率、分段瓶颈，以及每一项突破性改动的贡献

