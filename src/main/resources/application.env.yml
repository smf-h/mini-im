server:
  port: ${IM_SERVER_PORT}

spring:
  application:
    name: ${IM_APP_NAME}
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: ${IM_MYSQL_URL}
    username: ${IM_MYSQL_USERNAME}
    password: ${IM_MYSQL_PASSWORD}
  flyway:
    enabled: ${IM_FLYWAY_ENABLED}
    baseline-on-migrate: ${IM_FLYWAY_BASELINE_ON_MIGRATE}
    baseline-version: ${IM_FLYWAY_BASELINE_VERSION}
    locations: ${IM_FLYWAY_LOCATIONS}
  data:
    redis:
      host: ${IM_REDIS_HOST}
      port: ${IM_REDIS_PORT}
      database: ${IM_REDIS_DATABASE}

mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      id-type: ASSIGN_ID

logging:
  level:
    com.miniim: ${IM_LOG_LEVEL_APP}
    org.mybatis: ${IM_LOG_LEVEL_MYBATIS}
    org.apache.ibatis: ${IM_LOG_LEVEL_IBATIS}
    com.baomidou.mybatisplus: ${IM_LOG_LEVEL_MYBATIS_PLUS}
    com.miniim.domain.mapper: ${IM_LOG_LEVEL_MAPPERS}

im:
  caffeine:
    client-msg-id:
      initial-capacity: ${IM_CAFFEINE_CLIENT_MSG_ID_INITIAL_CAPACITY}
      maximum-size: ${IM_CAFFEINE_CLIENT_MSG_ID_MAXIMUM_SIZE}
      expire-after-access-seconds: ${IM_CAFFEINE_CLIENT_MSG_ID_EXPIRE_AFTER_ACCESS_SECONDS}
  cron:
    resend:
      enabled: ${IM_CRON_RESEND_ENABLED}
      fixed-delay-ms: ${IM_CRON_RESEND_FIXED_DELAY_MS}
  auth:
    issuer: ${IM_AUTH_ISSUER}
    jwt-secret: ${IM_AUTH_JWT_SECRET}
    access-token-ttl-seconds: ${IM_AUTH_ACCESS_TOKEN_TTL_SECONDS}
    refresh-token-ttl-seconds: ${IM_AUTH_REFRESH_TOKEN_TTL_SECONDS}
  service:
    base-url: ${IM_SERVICE_BASE_URL}
  gateway:
    ws:
      host: ${IM_GATEWAY_WS_HOST}
      port: ${IM_GATEWAY_WS_PORT}
      path: ${IM_GATEWAY_WS_PATH}
    auth-verify-url: ${IM_GATEWAY_AUTH_VERIFY_URL}
    push-url: ${IM_GATEWAY_PUSH_URL}
  message:
    ack-timeout-ms: ${IM_MESSAGE_ACK_TIMEOUT_MS}
    max-retry: ${IM_MESSAGE_MAX_RETRY}

  code:
    friend-code-length: ${IM_CODE_FRIEND_CODE_LENGTH}
    group-code-length: ${IM_CODE_GROUP_CODE_LENGTH}
    reset-cooldown-seconds: ${IM_CODE_RESET_COOLDOWN_SECONDS}
